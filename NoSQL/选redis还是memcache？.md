## 选redis还是memcache？
memcache和redis是互联网分层架构中，最常用的KV缓存；
### 什么时候倾向于选择redis?
#### 复杂数据结构
redis支持复杂数据结构，memcache不支持复杂数据结构；
#### 持久化
redis支持持久化，memcache不支持持久化；
#### 天然高可用
redis天然支持集群功能，可以实现主从复制，读写分离。

memcache，要想要实现高可用，需要进行二次开发；
#### 存储的内容比较大
memcache的value存储，最大为1M，如果存储的value很大，只能使用redis。
### 什么时候倾向于memcache?
纯KV，数据量非常大，并发量非常大的业务，使用memcache更适合。
#### 内存分配
memcache使用预分配内存池的方式管理内存，能够省去内存分配时间。

redis则是临时申请空间，可能导致碎片

从这一点上，mc会更快一些。

#### 虚拟内存使用
memcache把所有的数据存储在物理内存里。

redis有自己的VM机制，理论上能够存储比物理内存更多的数据，当数据超量时，会引发swap，把冷数据刷到磁盘上。

从这一点上，数据量大时，mc会更快一些。

#### 网络模型
memcache使用非阻塞IO复用模型，redis也是使用非阻塞IO复用模型。

但由于redis还提供一些非KV存储之外的排序，聚合功能，在执行这些功能时，复杂的CPU计算，会阻塞整个IO调度。

从这一点上，由于redis提供的功能较多，mc会更快一些。

#### 线程模型
memcache使用多线程，主线程监听，worker子线程接受请求，执行读写，这个过程中，可能存在锁冲突。

redis使用单线程，虽无锁冲突，但难以利用多核的特性提升整体吞吐量。

从这一点上，mc会快一些。

参考链接：https://my.oschina.net/90888/blog/2996680
